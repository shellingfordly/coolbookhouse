var e=Object.assign;import{p as a,a as t,o,c as l,w as s,d as r,r as n,b as d,e as u,t as i,f as m,g as c,h as p,i as f,j as b,k as h,X as w,l as D,m as U,n as _,s as k,q as v,S as g,u as y,v as V,x as z,V as B,K as C,Q as S,E as x,C as M,y as R}from"./vendor.259a9f36.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(t){const o=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((t,s)=>{const r=new URL(e,o);if(self[a].moduleMap[r])return t(self[a].moduleMap[r]);const n=new Blob([`import * as m from '${r}';`,`${a}.moduleMap['${r}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){s(new Error(`Failed to import: ${e}`)),l(d)},onload(){t(self[a].moduleMap[r]),l(d)}});document.head.appendChild(d)})),self[a].moduleMap={}}}("/assets/");const L={name:"Header"},A=s("data-v-7fbf5626");a("data-v-7fbf5626");const H={class:"header"};t();const j=A(((e,a,t,s,r,n)=>(o(),l("div",H," Cool Book House "))));L.render=j,L.__scopeId="data-v-7fbf5626";const K={name:[{required:!0,message:"请填写准确的书名",trigger:"blur"}],format:[{required:!0,message:"请选择正确的格式",trigger:"change"}],link:[{required:!0,message:"请填写正确的链接",validator:function(e,a){return/[http|https]:\/\/.+\..+/.test(a)},trigger:"blur"}]};const O=r({props:{formData:{type:Object},isUpdate:{type:Boolean,default:!1}},setup(a){const t=n({formData:{_id:"",name:"",link:"",uppsw:"",gzpsw:"",user:"",format:""}}),o=d(null);return u((()=>a.formData),(e=>{a.isUpdate?(t.formData=function(e,a){const t={};for(const o in e)Reflect.has(e,o)&&(t[o]=a[o]);return t}(f(t.formData),f(e)),console.log("state.formData",t.formData)):t.formData={_id:"",name:"",link:"",uppsw:"",gzpsw:"",user:"",format:""}}),{deep:!0,immediate:!0}),e(e({},i(t)),{formRef:o,validate:function(){return new Promise((e=>{o.value.validate((a=>{e({res:a,data:t.formData})}))}))},rules:K,resetFormData:function(){t.formData={_id:"",name:"",link:"",uppsw:"",gzpsw:"",user:"",format:""}}})}}),$=s("data-v-464453a6");a("data-v-464453a6");const F=b("mobi"),q=b("epub"),E=b("pdf"),I=b("txt");t();const P=$(((e,a,t,s,r,n)=>{const d=m("el-input"),u=m("el-form-item"),i=m("el-radio"),f=m("el-radio-group"),b=m("el-form");return o(),l(b,{class:"home-form","label-position":"right","label-width":"90px",rules:e.rules,model:e.formData,ref:"formRef"},{default:$((()=>[c(u,{label:"书名",prop:"name"},{default:$((()=>[c(d,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),placeholder:"请填写准确的书名"},null,8,["modelValue"])])),_:1}),c(u,{label:"链接地址",prop:"link"},{default:$((()=>[c(d,{modelValue:e.formData.link,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.link=a),placeholder:"请填写正确的链接",onKeyup:a[3]||(a[3]=p((a=>e.$emit("doAdd")),["enter"]))},null,8,["modelValue"])])),_:1}),c(u,{label:"格式",prop:"format"},{default:$((()=>[c(f,{modelValue:e.formData.format,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.format=a)},{default:$((()=>[c(i,{label:"mobi"},{default:$((()=>[F])),_:1}),c(i,{label:"epub"},{default:$((()=>[q])),_:1}),c(i,{label:"pdf"},{default:$((()=>[E])),_:1}),c(i,{label:"txt"},{default:$((()=>[I])),_:1})])),_:1},8,["modelValue"])])),_:1}),c(u,{label:"提取码"},{default:$((()=>[c(d,{modelValue:e.formData.uppsw,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.uppsw=a),placeholder:"可不填"},null,8,["modelValue"])])),_:1}),c(u,{label:"解压密码"},{default:$((()=>[c(d,{modelValue:e.formData.gzpsw,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.gzpsw=a),placeholder:"可不填"},null,8,["modelValue"])])),_:1}),c(u,{label:"贡献者"},{default:$((()=>[c(d,{modelValue:e.formData.user,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.user=a),placeholder:"可不填"},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])}));function T(e,a={},t="get"){let o;return new Promise((l=>{o="get"===t?h.get(e,{params:a}):h.post(e,a),o.then((e=>{l(e)}))}))}O.render=P,O.__scopeId="data-v-464453a6",h.interceptors.response.use((e=>e.data));const Q={getBookListUrl:"/book/get.list.1.0.0",addBookUrl:"/book/add.1.0.0",searchBookUrl:"/book/search.1.0.0",updateBookUrl:"/book/update.1.0.0",deleteBookUrl:"/book/delete.1.0.0"};var W=function(){const e={};for(const a in Q)if(Reflect.has(Q,a)){const t=Q[a];console.log(a),e[a]="http://182.61.19.153:8080"+t}return e}();const X=r({props:{tableData:{type:Array,default:[]}},setup:(e,a)=>({goUrl:function(e){window.open(e)},isShowDelete:function(e){return(new Date).getTime()-e.createTime<6e5},doDelete:async function(e){const{status:t}=await(o={_id:e._id},T(W.deleteBookUrl,o,"post"));var o;1e3===t&&(w.success("删除成功！"),a.emit("doDelete"))}})}),G=s("data-v-79abccf1");a("data-v-79abccf1");const J=b(" 下载 "),N=b(" 更新 "),Y=b(" 删除 ");t();const Z=G(((e,a,t,s,r,n)=>{const d=m("el-table-column"),u=m("el-button"),i=m("el-table");return o(),l(i,{data:e.tableData,style:{width:"100%"},size:"small"},{default:G((()=>[c(d,{prop:"name",label:"书名"}),c(d,{prop:"format",label:"格式",width:"60px"}),c(d,{prop:"uppsw",label:"提取码",width:"80px"}),c(d,{prop:"gzpsw",label:"解压密码",width:"100px"}),c(d,{prop:"user",label:"提供者",width:"200px"}),c(d,{label:"操作",width:"130px"},{default:G((a=>[c(u,{type:"text",size:"medium",onClick:t=>e.goUrl(a.row.link)},{default:G((()=>[J])),_:2},1032,["onClick"]),c(u,{type:"text",size:"medium",onClick:t=>e.$emit("onUpdate",a.row)},{default:G((()=>[N])),_:2},1032,["onClick"]),e.isShowDelete(a.row)?(o(),l(u,{key:0,type:"text",size:"medium",onClick:t=>e.doDelete(a.row)},{default:G((()=>[Y])),_:2},1032,["onClick"])):D("",!0)])),_:1})])),_:1},8,["data"])}));X.render=Z,X.__scopeId="data-v-79abccf1";const ee=r({name:"HelloWorld",components:{HomeForm:O,HomeTable:X},setup(){const a=d(null),t=n({searchKey:"",isShowModel:!1,isUpdate:!1,tableData:[],formData:{}});async function o(){const{status:e,data:a}=await T(W.getBookListUrl);1e3===e&&(t.tableData=a)}async function l(){const{res:e,data:l}=await a.value.validate();if(!e)return;const{status:s}=await(r=l,T(W.addBookUrl,r,"post"));var r;1e3===s?(w.success("添加成功，感谢您的支持！"),o()):w.warning("添加失败，请重新尝试！"),t.isShowModel=!1,a.value.resetFormData()}return U(o),e(e({},i(t)),{formRef:a,doAdd:l,doSsearch:async function(){const{status:e,data:a}=await(o={name:t.searchKey},T(W.searchBookUrl,o,"post"));var o;1e3===e&&(t.tableData=a)},onUpdate:function(e){t.isUpdate=!0,t.formData=e,t.isShowModel=!0},doAction:function(){t.isUpdate?async function(){console.log(a.value.formData);const{status:e}=await(l=a.value.formData,T(W.updateBookUrl,l,"post"));var l;1e3===e?(t.isShowModel=!1,w.success("更新成功！"),o()):w.warning("更新失败，请重新尝试！")}():l()},setBookList:o})}}),ae=s("data-v-2f57d69f");a("data-v-2f57d69f");const te={class:"home"},oe={class:"header"},le=b(" 添加 "),se=b(" 查询 "),re={class:"content"},ne={class:"dialog-footer"},de=b("取 消");t();const ue=ae(((e,a,t,s,r,n)=>{const d=m("el-button"),u=m("el-col"),i=m("el-input"),f=m("el-row"),h=m("home-table"),w=m("home-form"),D=m("el-dialog");return o(),l("div",te,[c("div",oe,[c(f,null,{default:ae((()=>[c(u,{span:12},{default:ae((()=>[c(d,{type:"primary",size:"small",onClick:a[1]||(a[1]=a=>(e.isShowModel=!0,e.isUpdate=!1))},{default:ae((()=>[le])),_:1})])),_:1}),c(u,{span:12,class:"search"},{default:ae((()=>[c(i,{class:"search-input",modelValue:e.searchKey,"onUpdate:modelValue":a[2]||(a[2]=a=>e.searchKey=a),placeholder:"请输入搜索书名",onKeyup:p(e.doSsearch,["enter"]),size:"small"},null,8,["modelValue","onKeyup"]),c(d,{type:"primary",size:"small",onClick:e.doSsearch},{default:ae((()=>[se])),_:1},8,["onClick"])])),_:1})])),_:1})]),c("div",re,[c(h,{tableData:e.tableData,onDoDelete:e.setBookList,onOnUpdate:e.onUpdate},null,8,["tableData","onDoDelete","onOnUpdate"])]),c(D,{title:e.isUpdate?"更新书籍":"添加书籍",modelValue:e.isShowModel,"onUpdate:modelValue":a[4]||(a[4]=a=>e.isShowModel=a),width:"500px","before-close":()=>e.isShowModel=!1},{footer:ae((()=>[c("span",ne,[c(d,{size:"small",onClick:a[3]||(a[3]=a=>e.isShowModel=!1)},{default:ae((()=>[de])),_:1}),c(d,{type:"primary",size:"small",onClick:e.doAction},{default:ae((()=>[b(_(e.isUpdate?"更新":"添加"),1)])),_:1},8,["onClick"])])])),default:ae((()=>[c(w,{ref:"formRef",isUpdate:e.isUpdate,formData:e.formData,onDoAdd:e.doAdd},null,8,["isUpdate","formData","onDoAdd"])])),_:1},8,["title","modelValue","before-close"])])}));ee.render=ue,ee.__scopeId="data-v-2f57d69f";const ie={name:"App",components:{Header:L,Home:ee}},me={class:"app"};ie.render=function(e,a,t,s,r,n){const d=m("Header"),u=m("Home");return o(),l("div",me,[c(d),c(u)])};const ce=[k,v,g,y,V,z,B,C,S,x,M];const pe=R(ie);var fe;fe=pe,ce.forEach((e=>{fe.use(e)})),pe.mount("#app");
